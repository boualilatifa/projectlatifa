{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const clientRegister = createAsyncThunk(\"client/register\", async client => {\n  try {\n    let response = await axios.post(\"http://localhost:5001/client/register\", client);\n    return response;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const clientLogin = createAsyncThunk(\"client/login\", async client => {\n  try {\n    let response = await axios.post(\"http://localhost:5001/client/login\", client);\n    return response;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const clientupdate = createAsyncThunk(\"client/update\", async _ref => {\n  let {\n    id,\n    newuser\n  } = _ref;\n\n  try {\n    let response = await axios.put(`http://localhost:5001/client/${id}`, newuser);\n    return response;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const clientCurrent = createAsyncThunk(\"client/current\", async () => {\n  try {\n    let response = await axios.get(\"http://localhost:5001/client/current\", {\n      headers: {\n        Authorization: localStorage.getItem(\"token\")\n      }\n    });\n    return response;\n  } catch (error) {\n    console.log(error);\n  }\n});\nconst initialState = {\n  client: null,\n  status: null\n};\nexport const userSlice = createSlice({\n  name: \"client\",\n  initialState,\n  reducers: {\n    logout: (state, action) => {\n      state.client = null;\n      localStorage.removeItem(\"token\");\n    }\n  },\n  extraReducers: {\n    [clientupdate.pending]: state => {\n      state.status = \"pending\";\n    },\n    [clientupdate.fulfilled]: state => {\n      state.status = \"fulfilled\";\n    },\n    [clientupdate.rejected]: state => {\n      state.status = \"rejected\";\n    },\n    //clientregister\n    [clientRegister.pending]: state => {\n      state.status = \"pending\";\n    },\n    [clientRegister.fulfilled]: (state, action) => {\n      state.status = \"succcessssss\";\n      state.client = action.payload.data.newClientToken;\n      localStorage.setItem(\"token\", action.payload.data.token);\n    },\n    [clientRegister.rejected]: state => {\n      state.status = \"fail\";\n    },\n    //clientlogin\n    [clientLogin.pending]: state => {\n      state.status = \"pending\";\n    },\n    [clientLogin.fulfilled]: (state, action) => {\n      state.status = \"succcess\";\n      state.client = action.payload.data.client;\n      console.log(action.payload);\n      localStorage.setItem(\"token\", action.payload.data.token);\n    },\n    [clientLogin.rejected]: state => {\n      state.status = \"fail\";\n    },\n    //clientcurrent\n    [clientCurrent.pending]: state => {\n      state.status = \"pending\";\n    },\n    [clientCurrent.fulfilled]: (state, action) => {\n      var _action$payload;\n\n      state.status = \"succcess\";\n      state.client = (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.data.req;\n    },\n    [clientCurrent.rejected]: state => {\n      state.status = \"fail\";\n    }\n  }\n}); // Action creators are generated for each case reducer function\n\nexport const {\n  logout\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","clientRegister","client","response","post","error","console","log","clientLogin","clientupdate","id","newuser","put","clientCurrent","get","headers","Authorization","localStorage","getItem","initialState","status","userSlice","name","reducers","logout","state","action","removeItem","extraReducers","pending","fulfilled","rejected","payload","data","newClientToken","setItem","token","req","actions","reducer"],"sources":["E:/MERN projects/final-project sabrine/client/src/redux/userSlice/userSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nexport const clientRegister = createAsyncThunk(\r\n  \"client/register\",\r\n  async (client) => {\r\n    try {\r\n      let response = await axios.post(\r\n        \"http://localhost:5001/client/register\",\r\n        client\r\n      );\r\n      return response;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const clientLogin = createAsyncThunk(\"client/login\", async (client) => {\r\n  try {\r\n    let response = await axios.post(\r\n      \"http://localhost:5001/client/login\",\r\n      client\r\n    );\r\n    return response;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n});\r\n\r\nexport const clientupdate = createAsyncThunk(\r\n  \"client/update\",\r\n  async ({ id, newuser }) => {\r\n    try {\r\n      let response = await axios.put(\r\n        `http://localhost:5001/client/${id}`,\r\n        newuser\r\n      );\r\n      return response;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const clientCurrent = createAsyncThunk(\"client/current\", async () => {\r\n  try {\r\n    let response = await axios.get(\"http://localhost:5001/client/current\", {\r\n      headers: {\r\n        Authorization: localStorage.getItem(\"token\"),\r\n      },\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n});\r\n\r\nconst initialState = {\r\n  client: null,\r\n  status: null,\r\n};\r\nexport const userSlice = createSlice({\r\n  name: \"client\",\r\n  initialState,\r\n  reducers: {\r\n    logout: (state, action) => {\r\n      state.client = null;\r\n      localStorage.removeItem(\"token\");\r\n    },\r\n  },\r\n\r\n  extraReducers: {\r\n    [clientupdate.pending]: (state) => {\r\n      state.status = \"pending\";\r\n    },\r\n    [clientupdate.fulfilled]: (state) => {\r\n      state.status = \"fulfilled\";\r\n    },\r\n    [clientupdate.rejected]: (state) => {\r\n      state.status = \"rejected\";\r\n    },\r\n    //clientregister\r\n    [clientRegister.pending]: (state) => {\r\n      state.status = \"pending\";\r\n    },\r\n    [clientRegister.fulfilled]: (state, action) => {\r\n      state.status = \"succcessssss\";\r\n      state.client = action.payload.data.newClientToken;\r\n      localStorage.setItem(\"token\", action.payload.data.token);\r\n    },\r\n    [clientRegister.rejected]: (state) => {\r\n      state.status = \"fail\";\r\n    },\r\n    //clientlogin\r\n    [clientLogin.pending]: (state) => {\r\n      state.status = \"pending\";\r\n    },\r\n    [clientLogin.fulfilled]: (state, action) => {\r\n      state.status = \"succcess\";\r\n      state.client = action.payload.data.client;\r\n      console.log(action.payload);\r\n      localStorage.setItem(\"token\", action.payload.data.token);\r\n    },\r\n    [clientLogin.rejected]: (state) => {\r\n      state.status = \"fail\";\r\n    },\r\n    //clientcurrent\r\n    [clientCurrent.pending]: (state) => {\r\n      state.status = \"pending\";\r\n    },\r\n    [clientCurrent.fulfilled]: (state, action) => {\r\n      state.status = \"succcess\";\r\n      state.client = action.payload?.data.req;\r\n    },\r\n    [clientCurrent.rejected]: (state) => {\r\n      state.status = \"fail\";\r\n    },\r\n  },\r\n});\r\n\r\n// Action creators are generated for each case reducer function\r\nexport const { logout } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}